<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <title>CourierApp</title>

    <!-- ForerunNerdb -->
    <script src="resources/ForerunnerDB-master/js/dist/fdb-all.js" type="text/javascript"></script>
    <script type="application/javascript" src="db/setup.js"></script>
    <script type="application/javascript" src="db/Models/MigrationModel.js"></script>
    <script type="application/javascript" src="db/Models/UserModel.js"></script>
    <script type="application/javascript" src="db/Models/SettingsModel.js"></script>
    <script type="application/javascript" src="db/Models/DeliveriesModel.js"></script>
    <script type="application/javascript" src="db/Models/PickupModel.js"></script>
    <script type="application/javascript" src="db/Models/Ajax_queueModel.js"></script>
    <script type="application/javascript" src="db/Models/LogModel.js"></script>
    <script type="application/javascript" src="db/Models/ProcessModel.js"></script>
    <script type="application/javascript" src="db/Models/GpsModel.js"></script>
    <script type="application/javascript" src="db/run_migrations.js"></script>

    <!-- jQuery 3 -->
    <script src="tpl/bower_components/jquery/dist/jquery.min.js"></script>

    <!-- UNDERSCORE JS -->
    <script src="js/underscore-min.js" type="text/javascript"></script>
    <script src="tpl/bower_components/moment/min/moment.min.js"></script>

    <!-- ACCOUNTING_JS -->
    <script src="resources/bower_components/accounting/accounting.min.js" type="text/javascript"></script>

    <!-- BOOTSTRAP-VALIDATOR -->
    <script src="resources/bower_components/bootstrap-validator/dist/validator.min.js" type="text/javascript"></script>

    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="tpl/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <script src="tpl/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="tpl/bower_components/font-awesome/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="tpl/bower_components/Ionicons/css/ionicons.min.css">
    <!-- TOASTER_JS -->
    <script src="resources/bower_components/toastr/toastr.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="resources/bower_components/toastr/toastr.min.css">


    <!-- Theme style -->
    <link rel="stylesheet" href="tpl/dist/css/AdminLTE.min.css">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
         folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="tpl/dist/css/skins/skin-blue.min.css">
    <!-- Google Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

    <!-- MENU -->
    <link rel="stylesheet" href="css/menu.css">

    <!-- UTILITIES -->
    <link rel="stylesheet" href="css/app.css">

    <!-- UTILITIES -->
    <script src="js/utilities/JqueryUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/MomentUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/SecurityUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/AjaxUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/FormUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/ToastrUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/UrlUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/PolishedUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/AjaxQueue.js" type="text/javascript"></script>

    <!-- APP -->
    <script src="js/app/Haversine.js" type="text/javascript"></script>
    <script src="js/app/Alert_.js" type="text/javascript"></script>
    <script src="js/data/CustomerSettings.js" type="text/javascript"></script>
    <script src="js/app/Settings.js" type="text/javascript"></script>
    <script src="js/app/Operations.js" type="text/javascript"></script>
    <script src="js/app/Check_hardware.js" type="text/javascript"></script>
    <script src="js/app/Login.js" type="text/javascript"></script>
    <script src="js/setup_front.js" type="text/javascript"></script>
    <script src="js/app/ProcessForeground.js" type="text/javascript"></script>
    <script src="js/app/ProcessBackground.js" type="text/javascript"></script>
    <script src="js/app/Process.js" type="text/javascript"></script>
    <script src="js/app/Gps.js" type="text/javascript"></script>
    <script src="js/app/Notification.js" type="text/javascript"></script>
    <script src="js/app/Event_server.js" type="text/javascript"></script>
    <script src="js/app/Alert_proximity.js" type="text/javascript"></script>
    <script src="js/app/Alert_time.js" type="text/javascript"></script>


    <!-- VUE -->
    <script src="js/vue.min.js" type="text/javascript"></script>

    <style>
        .nav.navbar-nav>li>a{
            font-size: 21px;
            padding-left: 15px;
            padding-right: 15px;
        }
    </style>
</head>
<body class="hold-transition skin-blue sidebar-mini fixed">
<div class="wrapper" id="App">

    <header class="main-header">
        <!-- Logo -->
        <a href="#" class="logo hidden-xs">
            <!-- mini logo for sidebar mini 50x50 pixels -->
            <span class="logo-mini"><b>C</b>App</span>
            <!-- logo for regular state and mobile devices -->
            <span class="logo-lg"><b>Courier</b>APP</span>
        </a>
        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top">
            <!-- Sidebar toggle button-->
            <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
                <span class="sr-only">Toggle navigation</span>
            </a>

            <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">
                    <!-- Notifications: style can be found in dropdown.less -->
                    <li class="dropdown notifications-menu">
                        <a href="#" class="synchronize_data_operations" @click.prevent="synchronize_data_operations">
                            <i class="fa fa-refresh"></i>
                        </a>
                    </li>
                    <!-- Notifications: style can be found in dropdown.less -->
                    <li class="dropdown notifications-menu">
                        <a href="#">
                            <i class="fa fa-truck"></i>
                            <span class="label label-warning">{{ operations.pickups.length }}</span>
                        </a>
                    </li>
                    <!-- Tasks: style can be found in dropdown.less -->
                    <li class="dropdown notifications-menu">
                        <a href="#">
                            <i class="fa fa-tags"></i>
                            <span class="label label-danger">{{ operations.deliveries.length }}</span>
                        </a>
                    </li>
                    <!-- User Account: style can be found in dropdown.less -->
                    <li class="dropdown user user-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-user"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <!-- User image -->
                            <li class="user-header">
                                <img src="images/icon.png" class="img-circle" alt="User Image" style="background: white; border-radius: 22%!important;" >
                                <p>
                                    {{ user.name }}
                                    <small>{{ user.email }}</small>
                                </p>
                            </li>
                            <!-- Menu Footer-->
                            <li class="user-footer">
                                <div class="pull-right">
                                    <a href="#" class="btn btn-default btn-flat logout">Cerrar sesión</a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <!-- Control Sidebar Toggle Button -->
                    <li style="display: none">
                        <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <!-- Left side column. contains the logo and sidebar -->
    <aside class="main-sidebar" style="padding-top: 50px;">
        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">
            <!-- sidebar menu: : style can be found in sidebar.less -->
            <ul class="sidebar-menu" data-widget="tree">
                <li class="header">Menú principal</li>
                <li>
                    <a href="index.html">
                        <i class="fa fa-dashboard"></i>
                        <span>
                                Inicio
                        </span>
                    </a>
                </li>
                <li class="header">SISTEMA</li>
                <li class="active">
                    <a href="log.html">
                        <i class="fa fa-file-text"></i>
                        <span> Log </span>
                    </a>
                </li>
                <li>
                    <a href="ajax_queues.html">
                        <i class="fa fa-history"></i>
                        <span>Peticiones en cola</span>
                        <span class="pull-right-container">
                            <span class="label label-warning pull-right">{{ ajax_queue_count }}</span>
                        </span>
                    </a>
                </li>
                <li><a href="#" class="logout"><i class="fa fa-sign-out"></i> <span>Cerrar sesión</span></a></li>
            </ul>
        </section>
        <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper" style="padding-top: 50px">
        <!-- Main content -->
        <section class="content">
            <div class="row">
                <div class="col-xs-12">
                    <div class="box">
                        <div class="box-header">
                            <h3 class="box-title">Log</h3>
                        </div>
                        <div class="box-body">
                            <table class="table table-bordered table-hover datatable">
                                <thead>
                                <tr>
                                    <th>Registro</th>
                                    <th>Mensaje</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr v-for="record in _.sortBy(Log, 'created_at').reverse()" :class="record.status=='fail'?'danger':record.status" @click="show_current_record(record)">
                                    <td>{{ record.created_at }}</td>
                                    <td>{{ record.message }}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- MODAL INFO REQUEST -->
                <div class="modal fade" id="show_record_log" tabindex="-1" role="dialog">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title">Registro de log</h4>
                            </div>
                            <div class="modal-body">
                                <form>
                                    <div class="form-group">
                                        <label class="control-label">Mensaje</label>
                                        <input type="text" class="form-control" v-model="current_record.status">
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Mensaje</label>
                                        <textarea class="form-control" v-model="current_record.message"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Created at</label>
                                        <input type="text" class="form-control" v-model="current_record.created_at">
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label">Data</label>
                                        <textarea rows="15" class="form-control" v-model="JSON.stringify(current_record.data)"></textarea>
                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Salir</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->
    <footer class="main-footer" style="text-align: center;">
        <div class="pull-right hidden-xs">
            <b>Version</b> 1.0.0
        </div>
        <img src="images/savne_net.png" style="height: 30px;"/><br>
        CourierApp, un sistema desarrollado por <a href="http://www.savne.net" target="_blank">www.savne.net</a>
    </footer>

</div>
<!-- ./wrapper -->




<!-- jQuery UI 1.11.4 -->
<script src="tpl/bower_components/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
    $.widget.bridge('uibutton', $.ui.button);
</script>
<!-- Slimscroll -->
<script src="tpl/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- FastClick -->
<script src="tpl/bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="tpl/dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="tpl/dist/js/demo.js"></script>

<script type="text/javascript" src="cordova.js"></script>
<script src="js/pages/log.js" type="text/javascript"></script>
<script src="js/pages/intranet.js" type="text/javascript"></script>
</body>
</html>