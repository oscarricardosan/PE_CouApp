<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, target-densitydpi=medium-dpi, user-scalable=no">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <title>Courier App</title>

    <!-- jQuery 3 -->
    <script src="tpl/bower_components/jquery/dist/jquery.min.js"></script>


    <!-- ForerunNerdb -->
    <script src="resources/ForerunnerDB-master/js/dist/fdb-all.js" type="text/javascript"></script>
    <script type="application/javascript" src="db/setup.js"></script>
    <script type="application/javascript" src="db/Models/MigrationModel.js"></script>
    <script type="application/javascript" src="db/Models/UserModel.js"></script>
    <script type="application/javascript" src="db/Models/DeliveriesModel.js"></script>
    <script type="application/javascript" src="db/Models/PickupModel.js"></script>
    <script type="application/javascript" src="db/Models/Ajax_queueModel.js"></script>
    <script type="application/javascript" src="db/Models/LogModel.js"></script>
    <script type="application/javascript" src="db/Models/PrinterModel.js"></script>
    <script type="application/javascript" src="db/Models/ProcessModel.js"></script>
    <script type="application/javascript" src="db/run_migrations.js"></script>

    <!-- UNDERSCORE JS -->
    <script src="js/underscore-min.js" type="text/javascript"></script>

    <!-- ACCOUNTING_JS -->
    <script src="resources/bower_components/accounting/accounting.min.js" type="text/javascript"></script>

    <!-- TOASTR_JS -->
    <script src="resources/bower_components/toastr/toastr.min.js" type="text/javascript"></script>

    <!-- Theme style -->
    <link rel="stylesheet" href="tpl/dist/css/AdminLTE.min.css">

    <!-- BOOTSTRAP-VALIDATOR -->
    <script src="resources/bower_components/bootstrap-validator/dist/validator.min.js" type="text/javascript"></script>

    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="tpl/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <script src="tpl/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="tpl/bower_components/font-awesome/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="tpl/bower_components/Ionicons/css/ionicons.min.css">
    <!-- Select2 -->
    <link rel="stylesheet" href="tpl/bower_components/select2/dist/css/select2.min.css">
    <!-- TOASTER_JS -->
    <link rel="stylesheet" href="resources/bower_components/toastr/toastr.min.css">
    <!-- bootstrap datepicker -->
    <link rel="stylesheet" href="tpl/plugins/datepicker/datepicker3.css">
    <!-- Bootstrap time Picker -->
    <link rel="stylesheet" href="tpl/plugins/timepicker/bootstrap-timepicker.min.css">

    <!-- Theme style -->
    <link rel="stylesheet" href="tpl/dist/css/AdminLTE.min.css">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
         folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="tpl/dist/css/skins/_all-skins.min.css">
    <!-- Morris chart -->
    <link rel="stylesheet" href="tpl/bower_components/morris.js/morris.css">
    <!-- Date Picker -->
    <link rel="stylesheet" href="tpl/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="tpl/bower_components/bootstrap-daterangepicker/daterangepicker.css">

    <!-- SELECT2 -->
    <script src="tpl/bower_components/select2/dist/js/select2.full.min.js"></script>
    <!-- Google Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">

    <!-- MENU -->
    <link rel="stylesheet" href="css/menu.css">

    <!-- UTILITIES -->
    <link rel="stylesheet" href="css/app.css">

    <!-- UTILITIES -->
    <script src="js/utilities/JqueryUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/MomentUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/SecurityUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/AjaxUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/FormUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/ToastrUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/UrlUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/PolishedUtility_.js" type="text/javascript"></script>
    <script src="js/utilities/AjaxQueue.js" type="text/javascript"></script>

    <!-- APP -->
    <script src="js/app/Settings.js" type="text/javascript"></script>
    <script src="js/app/Check_hardware.js" type="text/javascript"></script>
    <script src="js/app/Operations.js" type="text/javascript"></script>
    <script src="js/app/Login.js" type="text/javascript"></script>
    <script src="js/setup_front.js" type="text/javascript"></script>
    <script src="js/app/PrinterFormats.js" type="text/javascript"></script>
    <script src="js/app/ProcessForeground.js" type="text/javascript"></script>
    <script src="js/app/ProcessBackground.js" type="text/javascript"></script>
    <script src="js/app/Process.js" type="text/javascript"></script>
    <script src="js/app/Gps.js" type="text/javascript"></script>
    <script src="js/app/Notification.js" type="text/javascript"></script>


    <!-- VUE -->
    <script src="js/vue.min.js" type="text/javascript"></script>

    <style>
        .pickups .pickup:first-child{
            border-top: none;
        }
        .pickups .pickup{
            border-left: none;
            border-right: none;
        }
        .deliveries .delivery:first-child{
            border-top: none;
        }
        .deliveries .delivery{
            border-left: none;
            border-right: none;
        }
        .nav.navbar-nav>li>a{
            font-size: 21px;
            padding-left: 15px;
            padding-right: 15px;
        }
    </style>
    <script src="js/pages/index.js"></script>
</head>
<body class="hold-transition skin-blue sidebar-mini fixed">
<div class="wrapper" id="App">

    <header class="main-header">
        <!-- Logo -->
        <a href="#" class="logo hidden-xs">
            <!-- mini logo for sidebar mini 50x50 pixels -->
            <span class="logo-mini"><b>C</b>App</span>
            <!-- logo for regular state and mobile devices -->
            <span class="logo-lg"><b>Courier</b>APP</span>
        </a>
        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top">
            <!-- Sidebar toggle button-->
            <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
                <span class="sr-only">Toggle navigation</span>
            </a>

            <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">
                    <!-- Notifications: style can be found in dropdown.less -->
                    <li class="dropdown notifications-menu" :style="ajax_queue_count>0?'background: darkred;':''">
                        <a href="#" id="check_ajax_queue" @click.prevent="check_ajax_queue">
                            <i class="fa fa-history"></i>
                            <span class="label label-warning">{{ ajax_queue_count }}</span>
                        </a>
                    </li>
                    <!-- Notifications: style can be found in dropdown.less -->
                    <li class="dropdown notifications-menu">
                        <a href="#" class="synchronize_data_operations" @click.prevent="synchronize_data_operations">
                            <i class="fa fa-refresh"></i>
                        </a>
                    </li>
                    <!-- Notifications: style can be found in dropdown.less -->
                    <li class="dropdown notifications-menu">
                        <a href="#">
                            <i class="fa fa-truck"></i>
                            <span class="label label-success">{{ operations.pickups.length }}</span>
                        </a>
                    </li>
                    <!-- Tasks: style can be found in dropdown.less -->
                    <li class="dropdown notifications-menu">
                        <a href="#">
                            <i class="fa fa-tags"></i>
                            <span class="label label-primary">{{ operations.deliveries.length }}</span>
                        </a>
                    </li>
                    <!-- User Account: style can be found in dropdown.less -->
                    <li class="dropdown user user-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-user"></i>
                        </a>
                        <ul class="dropdown-menu">
                            <!-- User image -->
                            <li class="user-header">
                                <img src="images/icon.png" class="img-circle" alt="User Image" style="background: white">
                                <p>
                                    {{ user.name }}
                                    <small>{{ user.email }}</small>
                                </p>
                            </li>
                            <!-- Menu Footer-->
                            <li class="user-footer">
                                <div class="pull-right">
                                    <a href="#" class="btn btn-default btn-flat logout">Cerrar sesión</a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <!-- Control Sidebar Toggle Button -->
                    <li style="display: none">
                        <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <!-- Left side column. contains the logo and sidebar -->
    <aside class="main-sidebar" style="padding-top: 50px;">
        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">
            <!-- sidebar menu: : style can be found in sidebar.less -->
            <ul class="sidebar-menu" data-widget="tree">
                <li class="header">Menú principal</li>
                <li class="active">
                    <a href="index.html">
                        <i class="fa fa-dashboard"></i>
                        <span>
                                Inicio
                            </span>
                    </a>
                </li>
                <li>
                    <a href="map.html">
                        <i class="fa fa-globe"></i>
                        <span>
                            Mapa
                        </span>
                    </a>
                </li>
                <li class="header">SISTEMA</li>
                <li>
                    <a href="log.html">
                        <i class="fa fa-file-text"></i>
                        <span> Log </span>
                    </a>
                </li>
                <li :style="ajax_queue_count>0?'background: darkred;':''">
                    <a href="ajax_queues.html">
                        <i class="fa fa-history"></i>
                        <span>Peticiones en cola</span>
                        <span class="pull-right-container">
                            <span class="label label-warning pull-right">{{ ajax_queue_count }}</span>
                        </span>
                    </a>
                </li>
                <li><a href="#" class="logout"><i class="fa fa-sign-out"></i> <span>Cerrar sesión</span></a></li>
            </ul>
        </section>
        <!-- /.sidebar -->
    </aside>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper" style="padding-top: 50px">
        <!-- Main content -->
        <section class="content">
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="Buscar por número..." v-model="number_search">
                            <span class="input-group-btn">
                            <button class="btn btn-default" type="button" id="scan_barcode_to_search">
                                <i class="fa fa-barcode" aria-hidden="true"></i>
                            </button>
                        </span>
                        </div>
                    </div>
                    <div class="form-group">
                        <select class="form-control" v-model="date_to_filter">
                            <option v-for="date in dates_to_filter" :value="date">{{ date }}</option>
                        </select>
                    </div>
                    <div class="nav-tabs-custom">
                        <ul class="nav nav-tabs">
                            <li class="active">
                                <a href="#tab_1" data-toggle="tab">
                                    Recolecciones
                                    <span class="label bg-green">
                                        {{ pickups_in_list }} de {{ operations.pickups.length }}
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="#tab_2" data-toggle="tab">
                                    Entregas <span class="label bg-blue">
                                        {{ deliveries_in_list }} de {{ operations.deliveries.length }}
                                    </span>
                                </a>
                            </li>
                        </ul>
                        <div class="tab-content no-padding">
                            <div class="tab-pane active" id="tab_1">
                                <div class="list-group pickups">
                                    <a href="#" class="pickup list-group-item"
                                       v-for=" (pickup, index) in pickups_sorted()"
                                       @click.prevent="showPickupModal(pickup)" data-picked="1"
                                       v-if="contains(number_search, pickup.pickup_number)"
                                    >
                                        <span class="text-muted pull-right">
                                            <i class="fa fa-clock-o"></i>
                                            <b>{{ pickup.pickup_date }}</b> {{ pickup.pickup_start_time.substr(0, 5) }} - {{ pickup.pickup_end_time.substr(0, 5) }}
                                        </span>
                                        <span :class="['label bg-'+pickup.pickup_state.class]">
                                            {{ index+1 }}) {{ pickup.pickup_state.name }} - {{ pickup.pickup_number }}
                                        </span>
                                        <br>
                                        <b>Empresa:</b> {{ pickup.company_name }}
                                        <b>{{ pickup.type_of_identity_document.short_name }}</b>: {{ pickup.identity_document }}<br>

                                        <i class="fa fa-map-marker"></i> <b>Dirección:</b> {{ pickup.address }}<br>
                                        <i class="fa fa-user"></i> <b>Contacto:</b> {{ pickup.contact_name }}<br>
                                        <i class="fa fa-phone"></i> <b>Teléfono:</b> {{ pickup.phone }}<br>
                                    </a>
                                </div>
                            </div>
                            <div class="tab-pane" id="tab_2">
                                <div class="list-group deliveries">
                                    <a href="#" class="delivery list-group-item"
                                       v-for="(delivery, index) in deliveries_sorted()"
                                       @click.prevent="showDeliveryModal(delivery)" data-picked="1"
                                       v-if="contains(number_search, delivery.delivery_number)"
                                    >
                                        <span class="text-muted pull-right">
                                            <i class="fa fa-clock-o"></i>
                                            <b>{{ delivery.delivery_date }}</b> {{ delivery.delivery_start_time.substr(0, 5) }} - {{ delivery.delivery_end_time.substr(0, 5) }}
                                        </span>
                                        <span :class="['label bg-'+delivery.delivery_state.class]">
                                            {{ index+1 }}) {{ delivery.delivery_state.name }}- {{ delivery.delivery_number }}
                                        </span>
                                        <br>
                                        <b>Empresa:</b> {{ delivery.company_name }}
                                        <b>{{ delivery.type_of_identity_document.short_name }}</b>: {{ delivery.identity_document }}<br>

                                        <i class="fa fa-map-marker"></i> <b>Dirección:</b> {{ delivery.address }}<br>
                                        <i class="fa fa-user"></i> <b>Contacto:</b> {{ delivery.contact_name }}<br>
                                        <i class="fa fa-phone"></i> <b>Teléfono:</b> {{ delivery.phone }}<br>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="text-align: center">
                        <button class="btn btn-primary" onclick="printText();">
                            <i class="fa fa-print"></i> Impreción manual
                        </button>
                    </div>

                </div>
            </div>
        </section>
        <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->
    <footer class="main-footer" style="text-align: center;">
        <div class="pull-right hidden-xs">
            <b>Version</b> 1.0.0
        </div>
        <img src="images/savne_net.png" style="height: 30px;"/><br>
        Courier App, un sistema desarrollado por <a href="http://www.savne.net" target="_blank">www.savne.net</a>
    </footer>




    <!--  MODALS -->
    <!-- MODAL ACTION PICKUP -->
    <div class="modal fade" id="pickup_action_modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Recoleccion {{ operations.current_pickup.pickup_number }}</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <div class="control-label" style="font-weight: normal; text-align: center; padding-bottom: 1em;">Deseas?</div>
                    </div>
                    <div class="form-group" v-if="operations.current_pickup.pickup_state_id === 1">
                        <button class="btn btn-block btn-flat btn-success" data-toggle="modal" data-target="#pickup_success_modal">
                            <i class="fa fa-check-circle"></i> Registrar recolección
                        </button>
                    </div>
                    <div class="form-group" style="margin-top: 1em; margin-bottom: 1em;" v-if="operations.current_pickup.pickup_state_id === 1">
                        <button class="btn btn-block btn-flat btn-danger" data-toggle="modal" data-target="#pickup_exception_modal">
                            <i class="fa fa-ban"></i> Registrar excepción
                        </button>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-block btn-flat btn-primary"  data-toggle="modal" data-target="#print_pickup_label">
                            <i class="fa fa-print"></i> Label
                        </button>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-block btn-flat bg-purple" data-toggle="modal" data-target="#pickup_attach_photo">
                            <i class="fa fa-camera"></i> Asociar foto
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL SUCCESS PICKUP -->
    <div class="modal fade" id="pickup_success_modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <form>
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Recoleccion {{ operations.current_pickup.pickup_number }}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div class="callout callout-warning" style="text-align: center;">
                                <p>
                                    VALOR: {{ operations.current_pickup.value | formatMoney }}
                                </p>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="callout callout-info">
                                <p>
                                    <b>Observaciones: </b> {{ operations.current_pickup.observation_to_pickup }}<br>
                                    <b>Contenido: </b> {{ operations.current_pickup.content }}
                                </p>
                            </div>
                        </div>
                        <div class="form-group" >
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar-o"></i>
                                </div>
                                <input name="fecha" type="date" class="form-control" current_date required placeholder="YYYY-mm-dd" >
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="bootstrap-timepicker">
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-clock-o"></i>
                                    </div>
                                    <input name="hora" type="time" placeholder="HH:mm:ss" class="form-control" current_time required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label">Persona que atendió:</label>
                            <input type="text" class="form-control" name="persona_que_atendio">
                        </div>
                        <div class="form-group">
                            <label class="control-label">Observaciones:</label>
                            <textarea class="form-control" name="observaciones"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-success">Registrar recolección</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- MODAL PRINT PICKUP LABEL -->
    <div class="modal fade" id="print_pickup_label" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <form>
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Label para recolección {{ operations.current_pickup.pickup_number }}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="control-label">Impresora:</label>
                            <select class="form-control" v-model="settings_current_printer" required>
                                <option :value="null">Selecciona tu impresora Bluetooth</option>
                                <option v-for="device in bluetooth_devices" :value="device.address">{{ device.name }}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="control-label">Tipo:</label>
                            <select class="form-control type_print" required>
                                <option value="">Seleccione tipo</option>
                                <option value="ZPL">Código ZPL</option>
                                <option value="TXT">Texto</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-success">Imprimir label</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- MODAL ATTACH PHOTO PICKUP-->
    <div class="modal fade" id="pickup_attach_photo" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Recoleccion {{ operations.current_pickup.pickup_number }}</h4>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group row" style="text-align: center;">
                            <div class="col-xs-12" style="padding-bottom: 20px;">
                                <img class="photo_of_camera" style="max-height: 200px; max-width: 100%;" :src="current_photo">
                            </div>
                            <div class="col-xs-6">
                                <button class="takePhoto btn btn-block btn-primary">
                                    <i class="fa fa-camera"></i>
                                </button>
                            </div>
                            <div class="col-xs-6">
                                <button class="selectPhoto btn btn-block btn-primary">
                                    <i class="fa fa-picture-o"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    <button type="button" class="submit btn btn-success attach_photo_to_pickup">Transmitir foto</button>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL EXCEPTION PICKUP -->
    <div class="modal fade" id="pickup_exception_modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form>
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Recoleccion {{ operations.current_pickup.pickup_number }}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div class="callout callout-info">
                                <p>
                                    <b>Observaciones para recolección: </b> {{ operations.current_pickup.observation_to_pickup }}
                                </p>
                            </div>
                        </div>
                        <div class="form-group" >
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar-o"></i>
                                </div>
                                <input name="fecha" type="date" class="form-control" current_date required placeholder="YYYY-mm-dd" >
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="bootstrap-timepicker">
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-clock-o"></i>
                                    </div>
                                    <input name="hora" type="time" placeholder="HH:mm:ss" class="form-control" current_time required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label">Motivo excepción:</label>
                            <select class="form-control" name="razon_excepcion" required>
                                <option disabled readonly selected value="">Seleccciona motivo</option>
                                <option value="Nadie en casa">Nadie en casa</option>
                                <option value="En vacaciones">En vacaciones</option>
                                <option value="Dirección errada">Dirección errada</option>
                                <option value="Otros">Otros</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="control-label">Persona que atendió:</label>
                            <input type="text" class="form-control" name="persona_que_atendio">
                        </div>
                        <div class="form-group">
                            <label class="control-label">Observaciones:</label>
                            <textarea class="form-control" name="observaciones"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-danger">Registrar exepción</button>
                    </div>
                </form>
            </div>
        </div>
    </div>



    <!-- MODAL ACTION DELIVERY -->
    <div class="modal fade" id="delivery_action_modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Entrega {{ operations.current_delivery.delivery_number }}</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <div class="control-label" style="font-weight: normal; text-align: center; padding-bottom: 1em;">Deseas?</div>
                    </div>
                    <div class="form-group" v-if="operations.current_delivery.delivery_state_id === 1">
                        <button class="btn btn-block btn-flat btn-success" data-toggle="modal" data-target="#delivery_success_modal">
                            <i class="fa fa-check-circle"></i> Registrar entrega
                        </button>
                    </div>
                    <div class="form-group" style="margin-top: 1em; margin-bottom: 1em;" v-if="operations.current_delivery.delivery_state_id  === 1">
                        <button class="btn btn-block btn-flat btn-danger" data-toggle="modal" data-target="#delivery_exception_modal">
                            <i class="fa fa-ban"></i> Registrar excepción
                        </button>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-block btn-flat btn-primary"  data-toggle="modal" data-target="#print_delivery_label">
                            <i class="fa fa-print"></i> Label
                        </button>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-block btn-flat bg-purple" data-toggle="modal" data-target="#delivery_attach_photo">
                            <i class="fa fa-camera"></i> Asociar foto
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL PRINT DELIVERY LABEL -->
    <div class="modal fade" id="print_delivery_label" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <form>
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Label para recolección {{ operations.current_pickup.pickup_number }}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label class="control-label">Impresora:</label>
                            <select class="form-control" v-model="settings_current_printer" required>
                                <option :value="null">Selecciona tu impresora Bluetooth</option>
                                <option v-for="device in bluetooth_devices" :value="device.address">{{ device.name }}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="control-label">Tipo:</label>
                            <select class="form-control type_print" required>
                                <option value="">Seleccione tipo</option>
                                <option value="ZPL">Código ZPL</option>
                                <option value="TXT">Texto</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-success">Imprimir label</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- MODAL SUCCESS DELIVERY -->
    <div class="modal fade" id="delivery_success_modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <form>
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Entrega {{ operations.current_delivery.delivery_number }}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div class="callout callout-warning" style="text-align: center;">
                                <p>
                                    VALOR: {{ operations.current_delivery.value | formatMoney }}
                                </p>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="callout callout-info">
                                <p>
                                    <b>Observaciones: </b> {{ operations.current_delivery.observation_to_delivery }}<br>
                                    <b>Contenido: </b> {{ operations.current_delivery.content }}
                                </p>
                            </div>
                        </div>
                        <div class="form-group" >
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar-o"></i>
                                </div>
                                <input name="fecha" type="date" class="form-control" current_date required placeholder="YYYY-mm-dd" >
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="bootstrap-timepicker">
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-clock-o"></i>
                                    </div>
                                    <input name="hora" type="time" placeholder="HH:mm:ss" class="form-control" current_time required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label">Persona que atendió:</label>
                            <input type="text" class="form-control" name="persona_que_atendio">
                        </div>
                        <div class="form-group">
                            <label class="control-label">Observaciones:</label>
                            <textarea class="form-control" name="observaciones"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-success">Registrar entrega</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- MODAL ATTACH PHOTO DELIVERY-->
    <div class="modal fade" id="delivery_attach_photo" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Entrega {{ operations.current_delivery.delivery_number }}</h4>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group row" style="text-align: center;">
                            <div class="col-xs-12" style="padding-bottom: 20px;">
                                <img class="photo_of_camera" style="max-height: 200px; max-width: 100%;" :src="current_photo">
                            </div>
                            <div class="col-xs-6">
                                <button class="takePhoto btn btn-block btn-primary">
                                    <i class="fa fa-camera"></i>
                                </button>
                            </div>
                            <div class="col-xs-6">
                                <button class="selectPhoto btn btn-block btn-primary">
                                    <i class="fa fa-picture-o"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    <button type="button" class="submit btn btn-success attach_photo_to_delivery">Transmitir foto</button>
                </div>
            </div>
        </div>
    </div>
    <!-- MODAL EXCEPTION DELIVERY -->
    <div class="modal fade" id="delivery_exception_modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <form>
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Entrega {{ operations.current_delivery.delivery_number }}</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div class="callout callout-info">
                                <p>
                                    <b>Observaciones: </b> {{ operations.current_delivery.observation_to_delivery }}
                                </p>
                            </div>
                        </div>
                        <div class="form-group" >
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar-o"></i>
                                </div>
                                <input name="fecha" type="date" class="form-control" current_date required placeholder="YYYY-mm-dd" >
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="bootstrap-timepicker">
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-clock-o"></i>
                                    </div>
                                    <input name="hora" type="time" placeholder="HH:mm:ss" class="form-control" current_time required>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label">Motivo excepción:</label>
                            <select class="form-control" name="razon_excepcion" required>
                                <option disabled readonly selected value="">Seleccciona motivo</option>
                                <option value="Nadie en casa">Nadie en casa</option>
                                <option value="En vacaciones">En vacaciones</option>
                                <option value="Dirección errada">Dirección errada</option>
                                <option value="Otros">Otros</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="control-label">Persona que atendió:</label>
                            <input type="text" class="form-control" name="persona_que_atendio">
                        </div>
                        <div class="form-group">
                            <label class="control-label">Observaciones:</label>
                            <textarea class="form-control" name="observaciones"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-danger">Registrar exepción</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- ./wrapper -->




<!-- jQuery UI 1.11.4 -->
<script src="tpl/bower_components/jquery-ui/jquery-ui.min.js"></script>
<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
    $.widget.bridge('uibutton', $.ui.button);
</script>
<!-- s.js charts -->
<script src="tpl/bower_components/raphael/raphael.min.js"></script>
<script src="tpl/bower_components/morris.js/morris.min.js"></script>
<!-- Sparkline -->
<script src="tpl/bower_components/jquery-sparkline/dist/jquery.sparkline.min.js"></script>
<!-- jvectormap -->
<script src="tpl/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="tpl/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<!-- jQuery Knob Chart -->
<script src="tpl/bower_components/jquery-knob/dist/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="tpl/bower_components/moment/min/moment.min.js"></script>
<script src="tpl/bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>
<!-- datepicker -->
<script src="tpl/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
<!-- Bootstrap WYSIHTML5 -->
<script src="tpl/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
<!-- Slimscroll -->
<script src="tpl/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
<!-- bootstrap datepicker -->
<script src="tpl/plugins/datepicker/bootstrap-datepicker.js"></script>
<!-- bootstrap time picker -->
<script src="tpl/plugins/timepicker/bootstrap-timepicker.min.js"></script>
<!-- FastClick -->
<script src="tpl/bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="tpl/dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="tpl/dist/js/demo.js"></script>

<script type="text/javascript" src="cordova.js"></script>
<script src="js/pages/index.js" type="text/javascript"></script>
<script src="js/pages/intranet.js" type="text/javascript"></script>

</body>
</html>